# RocketDoo Deploy Configuration
# Generated by: rkd deploy init

# ============================================================
# Module Configuration
# ============================================================
modules:
  auto_detect: true
  base_path: "addons"

  exclude_patterns:
    - "*/tests/*"
    - "*/__pycache__/*"
    - "*/.git/*"
    - "*/node_modules/*"
    - "*.pyc"
    - "*.pyo"

  # Used only if auto_detect: false
  # include_only:
  #   - my_module
  #   - package/another_module


# ============================================================
# Deployment Targets
# ============================================================
targets:

  # ----------------------------------------------------------
  # Example: VPS with Docker
  # ----------------------------------------------------------
  # production:
  #   type: vps
  #   enabled: true
  #
  #   connection:
  #     host: "192.168.1.100"
  #     port: 22
  #     user: "odoo"
  #
  #     # Authentication method: ssh_key | password
  #     auth_method: ssh_key
  #     ssh_key: "~/.ssh/id_ed25519"
  #     # password: "${PRODUCTION_SSH_PASSWORD}"
  #
  #   deployment_type: docker
  #
  #   docker:
  #     container_name: "odoo"
  #     compose_path: "/opt/odoo"
  #     addons_mount: "/mnt/extra-addons"
  #
  #   post_deploy:
  #     restart_service: true
  #     update_modules: true
  #     run_tests: false
  #     custom_commands: []


  # ----------------------------------------------------------
  # Example: VPS with Native Installation
  # ----------------------------------------------------------
  # staging:
  #   type: vps
  #   enabled: true
  #
  #   connection:
  #     host: "staging.example.com"
  #     port: 22
  #     user: "odoo"
  #     auth_method: ssh_key
  #     ssh_key: "~/.ssh/id_ed25519"
  #
  #   deployment_type: native
  #
  #   native:
  #     odoo_path: "/opt/odoo"
  #     addons_path: "/opt/odoo/custom_addons"
  #     service_name: "odoo"
  #
  #   post_deploy:
  #     restart_service: true
  #     update_modules: true
  #     custom_commands:
  #       - "sudo systemctl restart odoo"


  # ----------------------------------------------------------
  # Example: Odoo.sh (DO NOT MIX WITH VPS OPTIONS)
  # ----------------------------------------------------------
  # odoo_sh_test:
  #   type: odoo-sh
  #   enabled: true
  #
  #   odoo_sh:
  #     project_id: "my-project"
  #     branch: "test"
  #
  #     # Option 1: Use API token (recommended for automation)
  #     api_token: "${ODOO_SH_TOKEN}"
  #
  #     # Option 2: Git-based deploy
  #     # git_remote: "origin"
  #     # git_url: "git@github.com:username/odoo-sh-project.git"
  #
  #   structure:
  #     custom_addons_path: "."
  #
  #   post_deploy:
  #     wait_for_build: true
  #     open_browser: false


  # ----------------------------------------------------------
  # Example: Production with Safety Checks
  # ----------------------------------------------------------
  # production:
  #   type: vps
  #   enabled: false
  #
  #   require_confirmation: true
  #   require_git_tag: true
  #
  #   connection:
  #     host: "production.example.com"
  #     port: 22
  #     user: "odoo"
  #     auth_method: ssh_key
  #     ssh_key: "~/.ssh/id_ed25519"
  #
  #   deployment_type: docker
  #
  #   docker:
  #     container_name: "odoo"
  #     compose_path: "/opt/odoo"
  #     addons_mount: "/mnt/extra-addons"
  #
  #   post_deploy:
  #     restart_service: true
  #     update_modules: true
  #     run_tests: false
  #     notify_email: "admin@example.com"


# ============================================================
# Backup Configuration
# ============================================================
backup:
  enabled: true
  keep_last: 3
  path: ".rkd/deploy_backups"


# ============================================================
# Pre-Deploy Validations
# ============================================================
validations:
  check_manifest: true
  check_python_syntax: true
  check_xml_syntax: true
  check_dependencies: true
  run_tests: false


# ============================================================
# Logging Configuration
# ============================================================
logging:
  level: "INFO"
  file: ".rkd/deploy.log"
  console: true
